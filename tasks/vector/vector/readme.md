# Вектор
_"Как проверить, что человек знает C++? Попросить его написть свой std::vector"_ – Илья Мещерин.

## Пререквизиты

- [lists/list](/tasks/lists/list)
- [tree/bst](/tasks/tree/bst)
---

В этой задаче напишем свой [std::vector](https://en.cppreference.com/w/cpp/container/vector).

---

*vector* – структура данных, в которой последовательно хранятся элементы одного типа. Другое название - массив динамической длины.

## Сложность операций

Вектор позволяет вставлять элемент в конец в среднем за O(1), искать за O(N), получать доступ к элементу за O(1). Удаление происходит за O(N).

## Capacity и Size
Capacity (объём) показывает сколько элементов может быть вставлено в буфер данных.

Size (размер) показывает, сколько элементов лежит в буфере сейчас.

## Реаллокации (realloc)
Зачастую нам необходимо увеличить размер буфера, сохранив при этом текущие данные. Для этого придётся выделить буфер в два раза больше текущего, переложить туда элементы и удалить старый буфер.

*А можно ли лучше?...*

## Placement new

Напомню работу обычного оператора `new`:
1) Выделить память размера size
2) Вызвать конструктор на эту память.

Т.е. по итогу вы получаете готовые объекты.

Это не всегда то, чего мы хотим. Что, если в конструкторе у нас происходит захват ресурсов: соединения к базе данных, память, общие данные в мьютексе? В таком случае нам нужно просто выделить память (malloc), а дальше, когда пользователь захочет, сконструировать на эту память объект. Делается это при помощи операции [placement new](https://www.geeksforgeeks.org/placement-new-operator-cpp/).